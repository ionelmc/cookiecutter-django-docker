{% raw -%}
[all:vars]
app_version = {{ lookup('ini', 'current_version section=bumpversion file=../.bumpversion.cfg') }}
registry_port = 5001
registry_host = 127.0.0.1:{{ registry_port }}
compose_file = docker-compose.yml
inventory_dir = deploy/example
{% endraw %}
{%- set letsencrypt_domains = [] %}
{%- set services = {} %}
{%- for service in cookiecutter.deploy_services.split() %}
{%- if ':' in service %}
  {%- set service, domain = service.split(':') %}
  {%- set _ = letsencrypt_domains.append(domain) %}
{%- else %}
  {%- set domain = None %}
{%- endif %}
{%- set _ = services.setdefault(service, domain) %}
{%- endfor %}
letsencrypt_domains = {{ letsencrypt_domains }}
services = {{ services }}
{% raw %}
ansible_user = root
ansible_python_interpreter = python3

[web]
web1 ansible_host=172.26.172.215 ansible_port=22 ansible_ssh_extra_args='-R{{ registry_host }}:{{ registry_host }}'
{%- endraw %}
